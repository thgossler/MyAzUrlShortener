@namespace AzUrlShortener.AdminUI.Components.Shared
@using Microsoft.AspNetCore.Authentication
@using Microsoft.AspNetCore.Authentication.Cookies
@using Microsoft.AspNetCore.Authentication.OpenIdConnect
@inject NavigationManager NavigationManager

@rendermode InteractiveServer

<FluentButton OnClick="SwitchAccountAsync"
              Appearance="Appearance.Stealth"
              Color="var(--fill-color)"
              BackgroundColor="rgba(0,0,0,0)"
              Style="font-weight: normal; font-size: var(--type-ramp-base-font-size); cursor: pointer;">
    Switch account
</FluentButton>

@code {
    private void SwitchAccountAsync()
    {
        try
        {
            NavigationManager.NavigateTo("/api/auth/switch-account", true);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Account switch error: {ex.Message}");
            NavigationManager.NavigateTo("/", true);
        }
    }
}
